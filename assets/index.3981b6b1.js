(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))y(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const r of h.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&y(r)}).observe(document,{childList:!0,subtree:!0});function s(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerpolicy&&(h.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?h.credentials="include":u.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function y(u){if(u.ep)return;u.ep=!0;const h=s(u);fetch(u.href,h)}})();var F=function(e,t,s,y,u){if(!u){var h=[];u=function(g,V){h.push({x:g,y:V})}}var r=s-e,f=y-t,n=Math.abs(r),x=Math.abs(f),p=0,l=r>0?1:-1,i=f>0?1:-1;if(n>x)for(var o=e,c=t;l<0?o>=s:o<=s;o+=l)u(o,c),p+=x,p<<1>=n&&(c+=i,p-=n);else for(var o=e,c=t;i<0?c>=y:c<=y;c+=i)u(o,c),p+=n,p<<1>=x&&(o+=l,p-=x);return h};let b=Math.floor(window.innerWidth/3.05),P=Math.floor(window.innerHeight/3.85);const K=[],A=60,D=1/A;let Y=!1,d=!1,T=!0,m=!1,B=300,w=2,v=500,q=[],M=100,O=M*.75,L=300,S=20,C=25,W=7.5,H=1,I=5,N=30,a=G();function j(){for(let e=0;e<v;e++)q.push({x:Math.random()*b,y:Math.random()*P,vx:Math.random()-.5,vy:Math.random()-.5});for(let e=0;e<P;e++)K[e]=new Array(b).fill(0);window.addEventListener("mousemove",e=>{if(e.buttons==1&&a.length<v){let t={x:~~(e.x/3.05),y:~~(e.y/3.85)};a.findIndex(y=>y.x===t.x&&y.y===t.y)===-1&&(a.push(t),T=!1,document.title="Boids "+(v-a.length))}}),window.addEventListener("keydown",e=>{e.preventDefault(),e.code=="KeyP"&&(Y=!Y),m&&e.code=="KeyC"&&(a=[],T=!1,document.title="Boids "+(v-a.length)),e.code=="KeyE"&&(m=!m,d=!1),e.code=="Space"&&(d=!1,m=!1,q.forEach(t=>{t.vx=Math.random()-.5,t.vy=Math.random()-.5})),!m&&e.code=="KeyR"&&(B=300,d=!d)})}function E(e,t){t>=0&&~~t<P&&e>=0&&~~e<b&&(K[~~t][~~e]=1)}function X(e,t,s){let y=e*Math.cos(s)-t*Math.sin(s),u=e*Math.sin(s)+t*Math.cos(s);return[y,u]}function k(e,t,s,y){let u=Math.atan2(y,s)+Math.PI/2,[h,r]=X(0,-w,u);r+=t,h+=e;let[f,n]=X(w,w,u);f+=e,n+=t;let[x,p]=X(-w,w,u);x+=e,p+=t,F(h,r,f,n,E),F(f,n,x,p,E),F(x,p,h,r,E)}function R(){let e="";B--;for(let t=0;t<P;t++){d&&T&&B<0?e+="<span style='color: hsl("+t*2+", 100%, 50%)'>":d&&!T?e+="<span style='color: hsl(100, 100%, 50%)'>":e+="<span>";for(let s=0;s<b;s++)e+=K[t][s]>0?"@":" ",K[t][s]=0;e+="</span><br>"}document.querySelector("#app").innerHTML="<pre><tt>"+e+"</tt></pre>"}function z(e){if(d||(M=100),!Y){for(let t=0;t<v;t++){let s=q[t];s.x+=s.vx*e,s.y+=s.vy*e;let y=0,u=0,h=0,r=0,f=0,n=0,x=0;for(let l=0;l<v;l++){let i=q[l],o=i.x-s.x,c=i.y-s.y,g=Math.sqrt(o*o+c*c);g>0&&g<C&&(g<W&&(h+=s.x-i.x,r+=s.y-i.y),y+=i.x,u+=i.y,f+=i.vx,n+=i.vy,x++)}if(x>0&&(y/=x,u/=x,f/=x,n/=x,s.vx+=(y-s.x)*(H*e),s.vy+=(u-s.y)*(H*e),s.vx+=(f-s.vx)*(I*e),s.vy+=(n-s.vy)*(I*e)),s.vx+=h*N*e,s.vy+=r*N*e,d){let l=~~(t/(v/a.length));if(l<a.length){let i=a[l].x-s.x,o=a[l].y-s.y;M=Math.min(100,Math.abs(i)+Math.abs(o)),s.vx+=i,s.vy+=o}}const p=Math.sqrt(s.vx*s.vx+s.vy*s.vy);p>M&&(s.vx=s.vx/p*M,s.vy=s.vy/p*M),p<O&&(s.vx=s.vx/p*O,s.vy=s.vy/p*O),s.x>b-S?s.vx-=L*e:s.x<S&&(s.vx+=L*e),s.y>P-S?s.vy-=L*e:s.y<S&&(s.vy+=L*e),k(s.x,s.y,s.vx,s.vy)}R()}}j();for(;;){let e=performance.now();m?(a.forEach(y=>E(y.x,y.y)),R()):z(D);let t=performance.now()-e,s=D*1e3-t;await new Promise(y=>setTimeout(y,s>0?s:0))}function G(){let e=[];return e.push({x:20,y:20}),e.push({x:20,y:30}),e.push({x:20,y:40}),e.push({x:20,y:50}),e.push({x:20,y:60}),e.push({x:20,y:70}),e.push({x:20,y:80}),e.push({x:20,y:90}),e.push({x:20,y:100}),e.push({x:20,y:110}),e.push({x:20,y:120}),e.push({x:20,y:130}),e.push({x:20,y:140}),e.push({x:20,y:150}),e.push({x:20,y:160}),e.push({x:30,y:20}),e.push({x:40,y:20}),e.push({x:50,y:20}),e.push({x:60,y:20}),e.push({x:70,y:22}),e.push({x:80,y:25}),e.push({x:88,y:30}),e.push({x:95,y:35}),e.push({x:100,y:42}),e.push({x:103,y:50}),e.push({x:105,y:60}),e.push({x:103,y:70}),e.push({x:95,y:78}),e.push({x:85,y:83}),e.push({x:75,y:84}),e.push({x:65,y:85}),e.push({x:55,y:85}),e.push({x:45,y:85}),e.push({x:35,y:85}),e.push({x:25,y:85}),e.push({x:34,y:95}),e.push({x:43,y:105}),e.push({x:52,y:115}),e.push({x:61,y:125}),e.push({x:70,y:135}),e.push({x:79,y:145}),e.push({x:88,y:160}),e.push({x:150,y:20}),e.push({x:150,y:30}),e.push({x:150,y:40}),e.push({x:150,y:50}),e.push({x:150,y:60}),e.push({x:150,y:70}),e.push({x:150,y:80}),e.push({x:150,y:90}),e.push({x:150,y:100}),e.push({x:150,y:110}),e.push({x:150,y:120}),e.push({x:150,y:130}),e.push({x:150,y:140}),e.push({x:150,y:150}),e.push({x:150,y:160}),e.push({x:160,y:20}),e.push({x:170,y:20}),e.push({x:180,y:20}),e.push({x:190,y:20}),e.push({x:200,y:20}),e.push({x:210,y:20}),e.push({x:220,y:20}),e.push({x:230,y:20}),e.push({x:160,y:90}),e.push({x:170,y:90}),e.push({x:180,y:90}),e.push({x:190,y:90}),e.push({x:200,y:90}),e.push({x:210,y:90}),e.push({x:220,y:90}),e.push({x:230,y:90}),e.push({x:160,y:160}),e.push({x:170,y:160}),e.push({x:180,y:160}),e.push({x:190,y:160}),e.push({x:200,y:160}),e.push({x:210,y:160}),e.push({x:220,y:160}),e.push({x:230,y:160}),e.push({x:280,y:20}),e.push({x:280,y:30}),e.push({x:280,y:40}),e.push({x:280,y:50}),e.push({x:280,y:60}),e.push({x:280,y:70}),e.push({x:280,y:80}),e.push({x:280,y:90}),e.push({x:280,y:100}),e.push({x:280,y:110}),e.push({x:280,y:120}),e.push({x:280,y:130}),e.push({x:280,y:140}),e.push({x:280,y:150}),e.push({x:280,y:160}),e.push({x:290,y:20}),e.push({x:300,y:20}),e.push({x:310,y:20}),e.push({x:320,y:20}),e.push({x:330,y:20}),e.push({x:340,y:20}),e.push({x:350,y:20}),e.push({x:360,y:20}),e.push({x:290,y:90}),e.push({x:300,y:90}),e.push({x:310,y:90}),e.push({x:320,y:90}),e.push({x:330,y:90}),e.push({x:340,y:90}),e.push({x:350,y:90}),e.push({x:360,y:90}),e.push({x:290,y:160}),e.push({x:300,y:160}),e.push({x:310,y:160}),e.push({x:320,y:160}),e.push({x:330,y:160}),e.push({x:340,y:160}),e.push({x:350,y:160}),e.push({x:360,y:160}),e}
